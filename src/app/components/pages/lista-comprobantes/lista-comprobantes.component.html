<div class="row">
  <!-- <form novalidate="novalidate"> -->
    <div class="row">
      <div class="col s6 m3 l2">
        <mat-form-field appearance="outline" floatLabel="always" style="width:100%;">
          <mat-label>Fecha desde</mat-label>
          <input matInput [matDatepicker]="fechaDesde" placeholder="Seleccione" [formControl]="desde">
          <mat-datepicker-toggle matSuffix [for]="fechaDesde"></mat-datepicker-toggle>
          <mat-datepicker #fechaDesde></mat-datepicker>
        </mat-form-field>
      </div>
      <div class="col s6 m3 l2">
        <mat-form-field appearance="outline" floatLabel="always" style="width:100%;">
          <mat-label>Fecha hasta</mat-label>
          <input matInput [matDatepicker]="fechaHasta" placeholder="Seleccione" [formControl]="hasta">
          <mat-datepicker-toggle matSuffix [for]="fechaHasta"></mat-datepicker-toggle>
          <mat-datepicker #fechaHasta></mat-datepicker>
        </mat-form-field>
      </div>
    </div>

    <div class="row">
      <div>
        <mat-form-field appearance="outline" floatLabel="always" style="width: 26%; margin-right: 1%;">
          <mat-label>Referente</mat-label>
          <input #codProv matInput placeholder="" [formControl]="referente">         
        </mat-form-field>
        <button type="button" class="mine-btnforms" mat-flat-button (click)="abrirConsulta('c_proveedores')">
          <i class="material-icons" style="font-size:20px;">more_horiz</i>
        </button>
      </div>
      <mat-form-field appearance="outline" floatLabel="always" style="width:30%; margin-right: 1%">
        <mat-label>CAI</mat-label>
        <mat-select [(value)]="estado_cai">
          <mat-option *ngFor="let estado of estados" [value]="estado.id">
            {{estado.value}}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field appearance="outline" floatLabel="always" style="width:30%; margin-right: 1%">
        <mat-label>Doc</mat-label>
        <mat-select [(value)]="estado_doc">
          <mat-option *ngFor="let estado of estados" [value]="estado.id">
            {{estado.value}}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field appearance="outline" floatLabel="always" style="width:30%; margin-right: 1%">
        <mat-label>Autorizacion</mat-label>
        <mat-select [(value)]="autorizacion">
          <mat-option *ngFor="let estado of estados" [value]="estado.id">
            {{estado.value}}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field appearance="outline" floatLabel="always" style="width:30%; margin-right: 1%">
        <mat-label>Contabilidad</mat-label>
        <mat-select [(value)]="contabilidad">
          <mat-option *ngFor="let estado of estados" [value]="estado.id">
            {{estado.value}}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field appearance="outline" floatLabel="always" style="width:30%; margin-right: 1%">
        <mat-label>Imputacion</mat-label>
        <mat-select [(value)]="imputacion">
          <mat-option *ngFor="let estado of estados" [value]="estado.id">
            {{estado.value}}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <!-- <mat-form-field>
      <input matInput (keyup)="filtrarPorReferente($event.target.value)" placeholder="Filtrar por referente">
    </mat-form-field>
    <mat-form-field>
      <input matInput (keyup)="filtrarPorTotal($event.target.value)" placeholder="Filtrar por total">
    </mat-form-field> -->

    <button mat-raised-button (click)="filtrar()" style="float: right; background-color: #f08377">Filtrar</button>
  <!-- </form> -->
</div>

<div class="row" style="margin-top:10px; margin-bottom:5px;">
  <table mat-table [dataSource]="_comprobantes" matSort class="mat-elevation-z1"
    style="font-family: 'Lato', sans-serif !important;">

    <!-- columna Numero de comprobante -->
    <ng-container matColumnDef="numCompr">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>
        Comprobante
      </th>
      <td mat-cell *matCellDef="let row" >
        {{row.Comprobante}}
      </td>
    </ng-container>

    <!-- columna fecha -->
    <ng-container matColumnDef="fecha">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>
        Fecha
      </th>
      <td mat-cell *matCellDef="let row" >
        {{row.Fecha}}
      </td>
    </ng-container>

    <!-- columna referente -->
    <ng-container matColumnDef="referente">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>
        Referente
      </th>
      <td mat-cell *matCellDef="let row" >
        {{row.RazonSocial_Referente}}
      </td>
    </ng-container>

    <!-- columna total -->
    <ng-container matColumnDef="total">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>
        Total
      </th>
      <td mat-cell *matCellDef="let row" >
        {{row.Total}}
      </td>
    </ng-container>

    <!-- columna estado cai -->
    <ng-container matColumnDef="estado_cai">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>
        Est CAI
      </th>
      <td mat-cell *matCellDef="let row" style="width:60px; background-color: #00ffff">
        {{row.Estado_CAI | estadosComprobantes}}
      </td>
    </ng-container>

    <!-- columna estado doc -->
    <ng-container matColumnDef="estado_doc">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>
        Est Doc
      </th>
      <td mat-cell *matCellDef="let row" style="width:60px; background-color: #00ffff">
        {{row.Estado_Documentacion | estadosComprobantes}}
      </td>
    </ng-container>

    <!-- columna autorizacion -->
    <ng-container matColumnDef="autorizacion">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>
        Autorizacion
      </th>
      <td mat-cell *matCellDef="let row" style="width:60px; background-color: #00ffff">
        {{row.Estado_Impositivo | estadosComprobantes}}
      </td>
    </ng-container>

    <!-- columna Contabilidad -->
    <ng-container matColumnDef="contabilidad">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>
        Contabilidad
      </th>
      <td mat-cell *matCellDef="let row" style="width:60px; background-color: #ffccff">
        {{row.Estado_Contable | estadosComprobantes}}
      </td>
    </ng-container>

    <!-- columna imputacion -->
    <ng-container matColumnDef="imputacion">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>
        Imputac. presup
      </th>
      <td mat-cell *matCellDef="let row" style="width:60px; background-color: #66ff33">
        {{row.Estado_Presupuestario | estadosComprobantes}}
      </td>
    </ng-container>

    <!-- columna imputacion -->
    <ng-container matColumnDef="edit">
      <th mat-header-cell *matHeaderCellDef></th>
      <td mat-cell *matCellDef="let row" >
        <span>
          <a 
            [routerLink]="['/visor-impositivo', row.ID_Comprobante]" 
            [queryParams]="{ flag: 'true'}" 
            queryParamsHandling="merge" 
            style="color:#00ffff;">
            <i class="material-icons">edit</i>
          </a>
        </span>
        <span>
          <a 
            [routerLink]="['/visor-contable', row.ID_Comprobante]" 
            [queryParams]="{ flag: 'true'}" 
            queryParamsHandling="merge" 
            style="color:#ffccff;">
            <i class="material-icons">edit</i>
          </a>
        </span>
        <mat-icon (click)="ocultarColumna()" style="color:#66ff33;">edit</mat-icon>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
    <tr mat-row *matRowDef="let row; columns: columnsToDisplay;"></tr>
  </table>

  <mat-paginator 
    [length]="pageLength"
    [pageSize]="pageSize"
    [pageSizeOptions]="pageSizeOptions"
    (page)="getPagina($event)"
    class="mat-elevation-z1" >
  </mat-paginator>

  <div class="col s12" style="margin-top:5px;" *ngIf="_comprobantes.length < 1">
    <mat-card style="text-align:center; padding-top:10px; padding-bottom:10px; color:grey;"><i>No existen comprobantes</i></mat-card>
  </div>
</div>

<app-cons-din></app-cons-din>


